{% extends "layouts/base.html" %}
{% block title %}Edit Task{% endblock %}

{% block content %}
<h1>Edit Task</h1>

<form method="POST">
    {% csrf_token %}

    <label>Title</label>
    <input type="text" name="title" value="{{ task.title }}" required>

    <label>Description</label>
    <textarea name="description" required>{{ task.description }}</textarea>

    <label>Priority</label>
    <select name="priority">
        <option value="High" {% if task.priority == "High" %}selected{% endif %}>High</option>
        <option value="Medium" {% if task.priority == "Medium" %}selected{% endif %}>Medium</option>
        <option value="Low" {% if task.priority == "Low" %}selected{% endif %}>Low</option>
    </select>

    <label>Task Type</label>
    <select name="task_type" onchange="toggleDate(this.value)">
        <option value="Daily" {% if task.task_type == "Daily" %}selected{% endif %}>Daily</option>
        <option value="Weekly" {% if task.task_type == "Weekly" %}selected{% endif %}>Weekly</option>
        <option value="Monthly" {% if task.task_type == "Monthly" %}selected{% endif %}>Monthly</option>
        <option value="Specific" {% if task.task_type == "Specific" %}selected{% endif %}>Specific Date</option>
    </select>

    <div id="date-field" style="{% if task.task_type == 'Specific' %}display:block{% else %}display:none{% endif %};">
        <label>Due Date</label>
        <input type="date" name="due_date" value="{{ task.due_date }}">
    </div>

    <label>Due Time</label>
    <input type="time" name="due_time" value="{{ task.due_time }}">

    <label>Status</label>
    <select name="status">
        <option value="Pending" {% if task.status == "Pending" %}selected{% endif %}>Pending</option>
        <option value="Completed" {% if task.status == "Completed" %}selected{% endif %}>Completed</option>
    </select>

    <button type="submit">Save Changes</button>
</form>

<script>
function toggleDate(value) {
    document.getElementById("date-field").style.display =
        value === 'Specific' ? 'block' : 'none';
}
</script>

{% endblock %}
